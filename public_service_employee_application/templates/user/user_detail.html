{% extends 'base.html' %}<!-- user, form -->
{% block content %}
<div class="container my-3">
    <div class="d-flex justify-content-end">
        <button onclick="showEdit()" class="btn btn-primary" style="margin:1px;">수정</button>
    </div>
    <table class="table table-bordered">
        <thead>
        <tr>
            <td rowspan="3" style="width:150px;height:150px;text-align:center;margin=10px" class="align-middle">
                <img src="{{ user.img_addr or url_for('static', filename='basic image.png') }}" alt=""
                     style="display:inline-block;max-width: 100%;height:auto;">
            </td>
            <th class="text-center">성명</th>
            <td>{{ user.name }}</td>
        </tr>
        <tr>
            <th class="text-center">생년월일</th>
            <td>{{ user.birth_date }}</td>
        </tr>
        <tr>
            <th class="text-center">연락처</th>
            <td>{{ user.phone_num }}</td>
        </tr>
        </thead>
    </table>
    <table class="table table-bordered">
        <thead>
        <tr>
            <th class="text-center">주소</th>
            <td>{% if user.address %}{{ user.address }}{% endif %}</td>
        </tr>
        <tr>
            <th class="text-center">부대</th>
            <td>{{ user.unit_name }}</td>
        </tr>
        <tr>
            <th class="text-center">직책</th>
            <td>{{ user.position }}</td>
        </tr>
        <tr>
            <th class="text-center">채용일</th>
            <td>{{ user.hire_date }}</td>
        </tr>
        <tr>
            <th class="text-center">퇴직일</th>
            <td>{{ user.retirement_date }}</td>
        </tr>
        <tr>
            <th class="text-center">고용형태</th>
            <td>{{ user.employment_type }}</td>
        </tr>
        <tr>
            <th class="text-center">비고</th>
            <td>{% if user.bigo %}{{ user.bigo }}{% endif %}</td>
        </tr>
        </thead>
    </table>
    <dialog id="Edit">
        <h3>정보 편집</h3>
        <form method="post" class="post-form" id="employeeuserdetailform">
            {{ employeeuserdetailform.csrf_token }}
            {% include "employeeuserdetailform_errors.html" %}
            <div class="form-group">
                <label for="phone_num">연락처</label>
                <input type="text" class="form-control" name="phone_num" id="phone_num"
                       value="{{ employeeuserdetailform.phone_num.data or user.phone_num }}">
            </div>
            <div class="form-group">
                <label for="address">주소</label>
                <input type="text" class="form-control" name="address" id="address"
                       value="{{ employeeuserdetailform.address.data or user.address }}">
            </div>
            <button type="button" onclick="closeEdit()">취소</button>
            <button>수정</button>
        </form>
    </dialog>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
    function showEdit(){
        var dialog = document.getElementById("Edit");
        dialog.showModal();
    }
    function closeEdit(){
        event.preventDefault();
        var dialog = document.getElementById("Edit");
        dialog.close();
    }

    {% if g.modifyError %}
    showEdit();
    {% endif %}

</script>
{% endblock %}