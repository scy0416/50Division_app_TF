{% extends 'base.html' %}
{% block content %}
<div class="container my-3">
    <div class="justify-content-center my-3"><h2>계정 연결</h2></div>
    <h4><ul><li>신청자 정보</li></ul></h4>
    <table class="table">
        <thead>
        <tr class="text-center">
            <th>이름</th>
            <th>생년월일</th>
            <th>신청 일시</th>
        </tr>
        </thead>
        <tbody>
        <td>{{ join_request.name }}</td>
        <td>{{ join_request.birth_date }}</td>
        <td>{{ join_request.request_date|datetime }}</td>
        </tbody>
    </table>
    <h4><ul><li>검색 창</li></ul></h4>
    <form method="get">
        <label for="name">이름</label>
        <input type="text" name="name" id="name" value="{{ name or '' }}">
        <label for="birth_date">생년월일</label>
        <input type="date" name="birth_date" id="birth_date" value="{{ birth_date or '' }}">
        <button class="btn btn-primary">검색</button>
    </form>
    <table class="table">
        <thead>
        <tr class="text-center">
            <th>번호</th>
            <th>이름</th>
            <th>생년월일</th>
            <th>부대명</th>
            <th>직책</th>
            <th>
                <form method="post">
                    <input type="hidden" name="form_id" value="reject">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button class="btn btn-danger">가입 거부</button>
                </form>
            </th>
        </tr>
        </thead>
        <tbody>
        {% if result_list %}
        {% for result in result_list %}
        <tr class="text-center">
            <td>{{ loop.index }}</td>
            <td>{{ result.name }}</td>
            <td>{{ result.birth_date }}</td>
            <td>{{ result.unit_name }}</td>
            <td>{{ result.position }}</td>
            <td>
                <form method="post">
                    <input type="hidden" name="form_id" value="regist">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="hidden" name="user_id" value="{{ result.id }}">
                    <button class="btn btn-primary">연결</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan="6">검색 결과가 없습니다.</td>
        </tr>
        {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}